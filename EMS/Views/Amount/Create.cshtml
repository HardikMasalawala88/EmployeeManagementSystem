@model EMS.Data.FormModels.EmpSalary.EmpSalaryVM
@{
    ViewData["Title"] = "Add Salary";
    int totalPaidDays = 0;
}

<h1>Add Employee Salary</h1>
<hr />
<div class="row">
    <div class="col-md-12">
        <form asp-action="Create">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            
            <div class="form-outline mt-2 row">
                <div class="form-outline col-md-3">
                <div class="col">
                    <label asp-for="RequestingEmpId" class="form-label" for="form3Example9">Select Employee</label>
                </div>
                <div class="col">
                    @Html.DropDownListFor(a => a.RequestingEmpId, new SelectList(ViewBag.Employee, "Value", "Text"), "Select Employee", new { @class = "form-control"})
                    <span asp-validation-for="RequestingEmpId" class="text-danger"></span>
                </div>
                </div>
                <div class="form-outline col-md-3">
                <div class="col">
                    <label asp-for="Designation" class="control-label">Designation</label>
                </div>
                <div class="col">
                    <input type="text" asp-for="Designation" class="form-control" />
                    <span asp-validation-for="Designation" class="text-danger"></span>
                </div>
            </div>
            </div>
            <div class="form-outline mt-2 row">
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="Department" class="control-label">Department</label>
                    </div>
                    <div class="col">
                        <input type="text" asp-for="Department" class="form-control" />
                        <span asp-validation-for="Department" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="TotalWorkingDays" class="control-label">Total Working Days</label>
                    </div>
                    <div class="col">
                        <input type="number" readonly asp-for="TotalWorkingDays" id="txtTotalDays" value="@DateTime.DaysInMonth(DateTime.Now.Year, DateTime.Now.Month)" class="form-control" />
                        <span asp-validation-for="TotalWorkingDays" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-outline mt-2 row">
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="LOPDays" class="control-label">LOP Days</label>
                    </div>
                    <div class="col">
                        <input type="number" asp-for="LOPDays" id="txtLOPDays" class="form-control" />
                        <span asp-validation-for="LOPDays" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="PaidDays" class="control-label">Paid Days</label>
                    </div>
                    <div class="col">
                        <input type="number" asp-for="PaidDays" id="txtPaidDays" class="form-control" />
                        <span asp-validation-for="PaidDays" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-outline mt-2 row">
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="BankName" class="control-label">Bank Name</label>
                    </div>
                    <div class="col">
                        <input type="text" asp-for="BankName" class="form-control" />
                        <span asp-validation-for="BankName" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="AccountNumber" class="control-label">Account Number</label>
                    </div>
                    <div class="col">
                        <input type="text" asp-for="AccountNumber" class="form-control" />
                        <span asp-validation-for="AccountNumber" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-outline mt-2 row">
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="SalaryAmount" class="control-label">Salary</label>
                    </div>
                    <div class="col">
                        <input type="text" id="txtSalary" asp-for="SalaryAmount" class="form-control" />
                        <span asp-validation-for="SalaryAmount" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="ConveyanceAllowance" class="control-label">Conveyance Allowance</label>
                    </div>
                    <div class="col">
                        <input type="text" id="txtCA" asp-for="ConveyanceAllowance" class="form-control" />
                        <span asp-validation-for="ConveyanceAllowance" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-outline mt-2 row">
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="MedicalAllowance" class="control-label">Medical Allowance</label>
                    </div>
                    <div class="col">
                        <input type="text" id="txtMA" asp-for="MedicalAllowance" class="form-control" />
                        <span asp-validation-for="MedicalAllowance" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="HRA" class="control-label">HRA</label>
                    </div>
                    <div class="col">
                        <input type="text" id="txtHRA" asp-for="HRA" class="form-control" />
                        <span asp-validation-for="HRA" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-outline mt-3 row">
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="GrossSalary" class="control-label">GrossSalary</label>
                    </div>
                    <div class="col">
                        <input type="text" id="txtGrossSalary" asp-for="GrossSalary" class="form-control" />
                        <span asp-validation-for="GrossSalary" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="ProfessionalTax" class="control-label">Professional Tax</label>
                    </div>
                    <div class="col">
                        <input type="text" id="txtPT" asp-for="ProfessionalTax" class="form-control" />
                        <span asp-validation-for="ProfessionalTax" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-outline mt-2 row">
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="EPF" class="control-label">EPF</label>
                    </div>
                    <div class="col">
                        <input type="text" id="txtEPF" asp-for="EPF" class="form-control" />
                        <span asp-validation-for="EPF" class="text-danger"></span>
                    </div>
                </div>
                <div class="form-outline col-md-3">
                    <div class="col">
                        <label asp-for="NetSalary" class="control-label">Net Salary</label>
                    </div>
                    <div class="col">
                        <input type="text" id="txtNetSalary" asp-for="NetSalary" class="form-control" />
                        <span asp-validation-for="NetSalary" class="text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-group mt-2">
                <button type="submit" class="btn btn-primary">Add Amount</button>
                <button class="btn btn-secondary" asp-action="Index">Back to List</button>
            </div>
        </form>
    </div>
</div>

@section Scripts{
    <script>
        $(function () {
            $(".datepicker").datepicker({
                dateFomat: "yy-mm-dd",
            });
        });
        $("#txtLOPDays").on("input", function () {
            document.getElementById("txtPaidDays").value = document.getElementById("txtTotalDays").value - $(this).val();
        });
        $("#txtSalary").on("input", function () {
            document.getElementById("txtGrossSalary").value = $(this).val();
        });
        $("#txtCA").on("input", function () {
            debugger
            document.getElementById("txtGrossSalary").value = Number(document.getElementById("txtSalary").value) + Number($(this).val());
        });
        $("#txtMA").on("input", function () {
            debugger;
            document.getElementById("txtGrossSalary").value = Number(document.getElementById("txtSalary").value) +
                Number(document.getElementById("txtCA").value) + Number($(this).val());
        });
        $("#txtHRA").on("input", function () {
            debugger;
            document.getElementById("txtGrossSalary").value = Number(document.getElementById("txtSalary").value) +
                Number(document.getElementById("txtCA").value) + Number(document.getElementById("txtMA").value) + Number($(this).val());
        });
        $("#txtGrossSalary").on("input", function () {
            debugger;
            document.getElementById("txtNetSalary").value = $(this).val();
        });
        $("#txtPT").on("input", function () {
            debugger;
            document.getElementById("txtNetSalary").value = document.getElementById("txtGrossSalary").value -
                document.getElementById("txtEPF").value - $(this).val();
        });
        $("#txtEPF").on("input", function () {
            debugger;
            document.getElementById("txtNetSalary").value = document.getElementById("txtGrossSalary").value - 
                                                            document.getElementById("txtPT").value - $(this).val();
        });
        
    </script>
}